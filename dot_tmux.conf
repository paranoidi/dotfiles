# command with ctrl-a
unbind C-b
set -g prefix C-a

# misc binds
bind C choose-client

# panes with alt+wasd
# conflicts with vi?
bind -n M-right select-pane -L
bind -n M-left select-pane -R
bind -n M-up select-pane -U
bind -n M-down select-pane -D

# resize panes alt+ijkl
bind -n -r M-j resize-pane -L
bind -n -r M-k resize-pane -D
bind -n -r M-i resize-pane -U
bind -n -r M-l resize-pane -R

# change windows with alt pgup/down
bind -n M-pageup previous-window
bind -n M-pagedown next-window

# R reload config
bind R source-file ~/.tmux.conf \; display-message "Config reloaded..."

# History
set -g history-limit 10000
unbind l
bind l send-keys C-l \; clear-history 

# last window (C-a C-a)
bind-key C-a last-window

# start numbering from 1
set -g base-index 1

# display ssh in title?
set -g set-titles on
set -g set-titles-string "#T"

# easily toggle synchronization (mnemonic: e is for echo)
# sends commands to all panes
bind e setw synchronize-panes on
bind E setw synchronize-panes off

# Ctrl-q send the prefix to client inside window (nested tmux on remote)
bind-key -n C-q send-prefix

# tmuxinator
set -g base-index 1
set -g pane-base-index 1

# K kill session -- for easy restarting
bind K kill-session

# longer messages
set-option -g display-time 4000

#### THEME ####

# Basic status bar colors
set -g status-bg black
set -g status-fg white

# Left side of status bar, get rid of hostname in left
set -g status-left ''

# Right side of status bar
#set -g status-right-bg black
#set -g status-right-fg red
set -g status-right-length 40
set -g status-right " #(upspeed) #[fg=white]#(downspeed)#[default]"

set -g mode-style fg=yellow,bg=black

# Window status
set-window-option -g window-status-current-format '#[fg=white]#[fg=red,bold]#{window_index} #[fg=green]#(cmd="#{pane_current_command}"; echo ${cmd} | sed "s|^fish|üêü|g") #[fg=cyan]#(pwd="#{pane_current_path}"; echo ${pwd####*/} | sed "s|$USER|~|g")#[fg=white] '
set-window-option -g window-status-format '#[fg=white,bold]#{window_index} #[fg=colour244]#(cmd="#{pane_current_command}"; echo ${cmd} | sed "s|^fish|üêü|g") #[fg=colour244]#(pwd="#{pane_current_path}"; echo ${pwd####*/} | sed "s|$USER|~|g") '

# Current window status
# set -g window-status-current-bg black
# set -g window-status-current-fg cyan

# Window with activity status
#set -g window-status-activity-bg yellow # fg and bg are flipped here due to a
#set -g window-status-activity-fg black  # bug in tmux

# Window separator
set -g window-status-separator ""

# Window status alignment
set -g status-justify left 

# Pane border
#set -g pane-border-bg default
#set -g pane-border-fg default

# Active pane border
#set -g pane-active-border-bg default
#set -g pane-active-border-fg green

# Pane number indicator
set -g display-panes-colour default
set -g display-panes-active-colour default

# Scroll and select like vi
setw -g mode-keys vi  # optional, for vi-style scrolling

# Scroll shift-pgup/pgdown by one page
bind-key -n S-PgUp copy-mode \; send-keys -X page-up
bind-key -n S-PgDn copy-mode \; send-keys -X page-down

# AI chat panel
unbind i
bind-key i split-window 'fish -c "llm chat"'

